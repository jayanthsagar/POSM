<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Poiosm</title>

<script type="text/javascript" charset="utf-8" src="lib/phonegap.js"></script>

<link rel="stylesheet" href="lib/jquery.mobile-1.0.1.css" />
<link rel="stylesheet" href="lib/jquery.mobile.structure-1.0.1.css" />

<script src="lib/jquery-1.7.1.min.js"></script>
<script src="lib/jquery.mobile-1.0.1.js"></script>
<script src="lib/hogan.min.js"></script>
<script src="lib/jquery.timeago.js"></script>
<script src="lib/templates.js"></script>

<link rel="stylesheet" href="lib/leaflet/leaflet.css" />

<link rel="stylesheet" href="style.css" />
<script src="lib/leaflet/leaflet-src.js"></script>
<script src="js/poi.js"></script>
<script src="js/curpos.js"></script>
<script src="js/main.js"></script>
<script type="text/html" id="node-template">
    <osm>
        <node changeset="{{changeset_id}}" lat="{{lat}}" lon="{{lon}}">
            {{#tags}}
            <tag k="{{key}}" v="{{value}}" />
            {{/tags}}
        </node>
    </osm>
</script>
<script type="text/html" id="poi-template">
    <div>
        <div class="ui-grid-a">
            <small class="ui-block-a" style="width: 35%">#{{id}}</small>
            <small class="ui-block-b" style="width: 65%; text-align: right">({{lat}}, {{lon}})</small>
        </div>
        {{#name}}
        <div>
            <big>{{name}}</big>
        </div>
        {{/name}}
        <ul data-role="listview" data-inset="true" id="poi-tags-list">
        {{#tags}}
            <li>
                {{key}}: {{value}}
            </li>
        {{/tags}}
        {{^tags}}
            <li>No tags added</li>
        {{/tags}}
        </ul>
        <div>
            <small>Last updated <strong>{{lastUpdate}}</strong> by <strong>{{lastUser}}</strong></small>
        </div>
    </div>
</script>

</head>
<body onLoad="onBodyLoad();">
    <div data-role="page" id="map-page">
        <div data-role="header" id="map-header" class="center-wrapper">
            <div data-role="controlgroup" data-type="horizontal">
                <a href="#" data-icon="refresh" data-iconpos="notext" data-theme="a" id="show-poi" data-role="button" class="large-button">Show POIs</a>
                <a href="#" id="current-location" data-theme="e" data-icon="home" data-iconpos="notext" data-role="button" class="large-button">Current Location</a>
            </div>
        </div>
        <div id="map-container" data-role="content">
            <div id="map">
            </div>
        </div>
        <div id="map-footer" data-role="footer" class="center-wrapper">
            <div data-role="controlgroup" data-type="horizontal" id="logged-out-footer">
                <a href="#" id="login" class="large-button" data-role="button">Login</a>
            </div>
            <div class="hidden" data-role="controlgroup" data-type="horizontal" id="logged-in-footer">
                <a href="#" id="add-poi" class="large-button" data-role="button">Add POI</a>
            </div>
        </div>
    </div>

    <div data-role="page" id="poi-page" data-add-back-btn="true">
        <div data-role="header" id="poi-header">
            <h1 id="poi-name"></h1>
        </div>
        <div data-role="content" id="poi-content">
        </div>
        <div data-role="footer" id="poi-footer">
        </div>
    </div>

    <div data-role="page" id="login-dialog">
        <div data-role="header" id="login-header">
            <h2>OSM Login</h2>
        </div>
        <div data-role="content" id="login-content">
            <div data-role="fieldcontain">
                <label for="login-user-id">Username</label>
                <input type="text" name="login-user-id" id="login-user-id" />
            </div>

            <div data-role="fieldcontain">
                <label for="login-user-password">Password</label>
                <input type="password" name="login-user-password" id="login-password"  />
            </div>
        </div>
        <div data-role="footer" id="login-footer">
            <button id="save-login">Save</button>
        </div>
    </div>

</body>
</html>
